name: Welcome Partner

on:
  issues:
    types: [opened]
  fork:

jobs:
  welcome-issue:
    if: github.event_name == 'issues'
    runs-on: ubuntu-latest
    permissions:
      issues: write
    steps:
      - name: Welcome Partner Issue
        uses: actions/github-script@v7
        with:
          script: |
            const issueTitle = context.payload.issue.title;
            const issueLabels = context.payload.issue.labels.map(l => l.name);

            // Check if it's a partner participation issue
            if (issueTitle.includes('[Partner]') || issueLabels.includes('partner-participation')) {
              const welcomeMessage = `
## ğŸ‰ í™˜ì˜í•©ë‹ˆë‹¤!

**K-University Open Source Community (K-OSC)**ì— íŒŒíŠ¸ë„ˆ ì°¸ì—¬ ì‹ ì²­ì„ í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.

í•œë¦¼ëŒ€í•™êµ AI ì—ë“€í…Œí¬ ì„¼í„°ì—ì„œ ê²€í†  í›„ ì—°ë½ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

### ğŸ“‹ ë‹¤ìŒ ë‹¨ê³„
1. âœ… ì°¸ì—¬ ì‹ ì²­ ì™„ë£Œ
2. â³ í•œë¦¼ëŒ€í•™êµ ê²€í†  (ì˜ì—…ì¼ ê¸°ì¤€ 3ì¼ ì´ë‚´)
3. ğŸ¤ ê¸°ìˆ  í˜‘ë ¥ ë¯¸íŒ… ì¼ì • ì¡°ìœ¨
4. ğŸš€ ê³µë™ ê°œë°œ ë° ê¸°ìˆ  ê²€í†  ì‹œì‘

### ğŸ“š ì°¸ê³  ìë£Œ
- [Service Market ì—°ë™ ë§¤ë‰´ì–¼](https://github.com/K-University-OSC/service-market-sdk/blob/main/SERVICE_MARKET_INTEGRATION_MANUAL_20250201.md)
- [Simulator ì‚¬ìš© ê°€ì´ë“œ](https://github.com/K-University-OSC/service-market-sdk/tree/main/sandbox/simulator)

---
**Contact:** hallym.aiedtech@gmail.com
**Managed by:** í•œë¦¼ëŒ€í•™êµ AI ì—ë“€í…Œí¬ ì„¼í„°
              `;

              await github.rest.issues.createComment({
                owner: context.repo.owner,
                repo: context.repo.repo,
                issue_number: context.issue.number,
                body: welcomeMessage
              });

              // Add 'under-review' label
              await github.rest.issues.addLabels({
                owner: context.repo.owner,
                repo: context.repo.repo,
                issue_number: context.issue.number,
                labels: ['under-review']
              });
            }

  notify-fork:
    if: github.event_name == 'fork'
    runs-on: ubuntu-latest
    steps:
      - name: Log Fork Event
        run: |
          echo "ğŸ‰ New fork detected!"
          echo "Fork owner: ${{ github.event.forkee.owner.login }}"
          echo "Fork repo: ${{ github.event.forkee.full_name }}"
          echo "Fork URL: ${{ github.event.forkee.html_url }}"
